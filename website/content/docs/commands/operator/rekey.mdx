---
layout: docs
page_title: operator rekey - Command
description: |-
  The "operator rekey" command generates a new set of unseal keys. This can
  optionally change the total number of key shares or the required threshold of
  those key shares to reconstruct the root key. This operation is zero
  downtime, but it requires the Vault is unsealed and a quorum of existing
  unseal keys are provided.
---

# operator rekey

Generates a new set of unseal keys.

<CodeBlockConfig hideClipboard>

```shell-session
$ vault operator rekey [flags] [key]

$ vault operator rekey [-help | -h]
```

</CodeBlockConfig>

## Description

`operator rekey` generates a new set of unseal keys. This can optionally change
the total number of key shares or the required threshold of those key shares to
reconstruct the root key. This operation is zero downtime, but it requires the
Vault is unsealed and a quorum of existing unseal keys are provided.

An unseal key may be provided directly on the command line as an argument to
the command. If key is specified as `-`, the command will read from stdin. If
a TTY is available, the command will prompt for text.

If the flag `-target=recovery` is supplied, then this operation will require a
quorum of recovery keys in order to generate a new set of recovery keys.

## Command arguments

<br />

@include 'cli/operator/args/key.mdx'

## Command options

None.

## Command flags

<br />

@include 'cli/operator/flags/rekey-cancel.mdx'

<br /><hr /><br />

@include 'cli/operator/flags/rekey-init.mdx'

<br /><hr /><br />

@include 'cli/operator/flags/key-shares.mdx'

<br /><hr /><br />

@include 'cli/operator/flags/key-threshold.mdx'

<br /><hr /><br />

@include 'cli/operator/flags/nonce.mdx'

<br /><hr /><br />

@include 'cli/operator/flags/pgp-key.mdx'

<br /><hr /><br />

@include 'cli/operator/flags/status.mdx'

<br /><hr /><br />

@include 'cli/operator/flags/target.mdx'

<br /><hr /><br />

@include 'cli/operator/flags/verify.mdx'

<br /><hr /><br />

@include 'cli/operator/flags/backup.mdx'

<br /><hr /><br />

@include 'cli/operator/flags/backup-delete.mdx'

<br /><hr /><br />

@include 'cli/operator/flags/backup-retrieve.mdx'

## Global flags

<br />

@include 'cli/standard-settings/all-standard-flags.mdx'

## Examples

Initialize a rekey:

```shell-session
$ vault operator rekey \
    -init \
    -key-shares=15 \
    -key-threshold=9
```

Initialize a rekey when Auto Unseal is used for the Vault cluster:

```shell-session
$ vault operator rekey \
    -target=recovery \
    -init \
    -key-shares=15 \
    -key-threshold=9
```

Initialize a rekey and activate the verification process:

```shell-session
$ vault operator rekey \
    -init \
    -key-shares=15 \
    -key-threshold=9 \
    -verify
```

Rekey and encrypt the resulting unseal keys with PGP:

```shell-session
$ vault operator rekey \
    -init \
    -key-shares=3 \
    -key-threshold=2 \
    -pgp-keys="keybase:hashicorp,keybase:jefferai,keybase:sethvargo"
```

Rekey an Auto Unseal vault and encrypt the resulting recovery keys with PGP:

```shell-session
$ vault operator rekey \
    -target=recovery \
    -init \
    -pgp-keys=keybase:grahamhashicorp
    -key-shares=1
    -key-threshold=1
```

Store encrypted PGP keys in Vault's core:

```shell-session
$ vault operator rekey \
    -init \
    -pgp-keys="..." \
    -backup
```

Retrieve backed-up unseal keys:

```shell-session
$ vault operator rekey -backup-retrieve
```

Delete backed-up unseal keys:

```shell-session
$ vault operator rekey -backup-delete
```

Perform the verification of the rekey using the verification nonce:

```shell-session
$ vault operator rekey -verify -nonce="..."
```
