---
layout: docs
page_title: operator generate-root - Command
description: |-
  The "operator generate-root" command generates a new root token by combining a
  quorum of share holders.
---

# operator generate-root

Generates a new root token by combining a quorum of share holders.

<CodeBlockConfig hideClipboard>

```shell-session
$ vault operator generate-root [flags]

$ vault operator generate-root [-help | -h]
```

</CodeBlockConfig>

## Description

`operator generate-root` generates a new root token by combining a quorum of
share holders. Using the `-dr-token` or `-recovery-token` options generates a DR
operation token or recovery token instead - these options must be included in
every form of the command.

To generate a root token, you must provide one of the following:

- A base64-encoded one-time-password (OTP) via the `-otp` flag. Generate a
suitable OTP using the `-generate-otp` flag. The resulting token is XORed with
this value when returned. Use `-decode` to get the final token value.

- A PGP key file or [keybase](/vault/docs/concepts/pgp-gpg-keybase) username via
the `-pgp-key` flag. The resulting token will be encrypted with this public key.

You must also provide an unseal key as a command line argument. Specify `-` to
read from stdin. If a TTY is available, you'll be prompted to enter the key.

For detailed step-by-step instructions, refer the [generate root guide](/vault/docs/troubleshoot/generate-root-token).

This command functions as six distinct subcommands, selected via the following options:

### 1. Start a token generation

When starting a root or privileged operation token generation, you must
choose one of the following protection methods for how the token will be
returned:

- A base64-encoded one-time-password (OTP). The resulting token is XORed
  with this value when it is returned. Use the `-decode` form of this
  command to output the final value.

  The Vault server will generate a suitable OTP for you, and return it:
  
  ```shell-session
  $ vault operator generate-root -init
  ```

- A PGP key. The resulting token is encrypted with this public key.
  The key may be specified as a path to a file, or a string of the
  form `keybase:<username>` to fetch the key from the keybase.io API.

  ```shell-session
  $ vault operator generate-root -init -pgp-key="..."
  ```

### 2. Enter an unseal key to progress root token generation

In the sub-form intended for interactive use, the command will
automatically look up the nonce of the currently active generation
operation, and will prompt for the key to be entered:

```shell-session
$ vault operator generate-root
```

In the sub-form intended for automation, the operation nonce must be
explicitly provided, and the key is provided directly on the command line:

```shell-session
$ vault operator generate-root -nonce=... KEY
```

If key is specified as `-`, the command will read from stdin.

### 3. Decode a generated token protected with an OTP

```shell-session
$ vault operator generate-root -decode=ENCODED_TOKEN -otp=OTP
```

If encoded token is specified as `-`, the command will read from stdin.

### 4. Generate an OTP code for the final token

```shell-session
$ vault operator generate-root -generate-otp
```

Since changes in Vault 0.11.2 in 2018, there is no longer any reason to
use this form, as a suitable OTP will be returned as part of the `-init`
command.

### 5. Get the status of a token generation that is in progress

```shell-session
$ vault operator generate-root -status
```

This form also returns the length of the a correct OTP, for the running
version and configuration of Vault.

### 6. Cancel a token generation that is in progress

This would be used to remove an in progress generation operation, so that
a new one can be started with different parameters.

```shell-session
$ vault operator generate-root -cancel
```

## Command arguments

<br />

None.

## Command options

None.

## Command flags

<br />

@include 'cli/operator/flags/cancel.mdx'

<br /><hr /><br />

@include 'cli/operator/flags/decode.mdx'

<br /><hr /><br />

@include 'cli/operator/flags/dr-token.mdx'

<br /><hr /><br />

@include 'cli/operator/flags/generate-otp.mdx'

<br /><hr /><br />

@include 'cli/operator/flags/init.mdx'

<br /><hr /><br />

@include 'cli/operator/flags/nonce.mdx'

<br /><hr /><br />

@include 'cli/operator/flags/otp.mdx'

<br /><hr /><br />

@include 'cli/operator/flags/pgp-key.mdx'

<br /><hr /><br />

@include 'cli/operator/flags/recovery-token.mdx'

<br /><hr /><br />

@include 'cli/operator/flags/status.mdx'

## Global flags

<br />

@include 'cli/standard-settings/all-standard-flags.mdx'

## Examples

Generate an OTP code for the final token:

```shell-session
$ vault operator generate-root -generate-otp
```

Start a root token generation:

```shell-session
$ vault operator generate-root -init
```

Enter an unseal key to progress root token generation:

```shell-session
$ vault operator generate-root
```