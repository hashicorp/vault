name: build

# 1.18.x is no longer active. Only docs and changelog entries should be merged to this branch.
# All code changes should be merged into 1.18.x+ent.

on:
  workflow_dispatch:
  pull_request:
    types:
      - opened
      - ready_for_review
      - reopened
      - synchronize
  push:
    branches:
      - main
      - release/**
  schedule:
    - cron: '05 02 * * *' # * is a special character in YAML so you have to quote this string

concurrency:
  group: ${{ github.head_ref || github.run_id }}-build
  cancel-in-progress: true

jobs:
  completed-successfully:
    runs-on: ${{ github.repository == 'hashicorp/vault' && 'ubuntu-latest' || fromJSON('["self-hosted","linux","small"]') }}
    steps:
      - run: echo "Build is not supported on inactive CE branches" >&2
