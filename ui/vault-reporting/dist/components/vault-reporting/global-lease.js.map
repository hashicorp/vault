{"version":3,"file":"global-lease.js","sources":["../../../src/components/vault-reporting/global-lease.gts"],"sourcesContent":["/**\n * Copyright (c) HashiCorp, Inc.\n * SPDX-License-Identifier: BUSL-1.1\n */\n\nimport Component from '@glimmer/component';\nimport {\n  HdsCardContainer,\n  HdsTextDisplay,\n} from '@hashicorp/design-system-components/components';\nimport TitleRow from './base/title-row.gts';\n\nimport './global-lease.scss';\n\nexport interface GlobalLeaseSignature {\n  Args: {\n    count: number;\n    quota: number;\n  };\n\n  Blocks: {\n    default: [];\n  };\n\n  Element: HTMLElement;\n}\n\nexport default class GlobalLease extends Component<GlobalLeaseSignature> {\n  get percentage() {\n    return Math.round(Math.min((this.args.count / this.args.quota) * 100, 100));\n  }\n\n  get progressFillClass() {\n    if (this.percentage < 50) {\n      return 'ssu-global-lease__progress-fill--low';\n    }\n    if (this.percentage < 100) {\n      return 'ssu-global-lease__progress-fill--medium';\n    }\n    return 'ssu-global-lease__progress-fill--high';\n  }\n\n  get formattedCount() {\n    const formatter = new Intl.NumberFormat('en-US', {\n      notation: 'compact',\n      compactDisplay: 'short',\n    });\n    const count = formatter.format(this.args.count);\n    const total = formatter.format(this.args.quota);\n\n    return `${count} / ${total}`;\n  }\n\n  <template>\n    <HdsCardContainer\n      data-test-global-lease\n      @hasBorder={{true}}\n      class=\"ssu-global-lease\"\n      ...attributes\n    >\n      <TitleRow\n        @title=\"Global lease count quota\"\n        @description=\"Snapshot of global lease count quota consumption\"\n        @linkText=\"Documentation\"\n        @linkIcon=\"docs-link\"\n        @linkUrl=\"https://developer.hashicorp.com/vault/docs/enterprise/lease-count-quotas\"\n      />\n\n      <HdsTextDisplay\n        class=\"ssu-global-lease__percentage-text\"\n      >{{this.percentage}}%</HdsTextDisplay>\n\n      <div class=\"ssu-global-lease__progress-wrapper\">\n        <div class=\"ssu-global-lease__progress-bar\">\n          <div\n            class=\"ssu-global-lease__progress-fill {{this.progressFillClass}}\"\n            {{! template-lint-disable no-inline-styles style-concatenation }}\n            style=\"width: {{this.percentage}}%;\"\n          ></div>\n        </div>\n        <span class=\"ssu-global-lease__count-text\">\n          <HdsTextDisplay @size=\"400\" @weight=\"medium\">\n            {{this.formattedCount}}\n          </HdsTextDisplay>\n        </span>\n      </div>\n\n    </HdsCardContainer>\n  </template>\n}\n"],"names":["GlobalLease","Component","percentage","Math","round","min","args","count","quota","progressFillClass","formattedCount","formatter","Intl","NumberFormat","notation","compactDisplay","format","total","setComponentTemplate","precompileTemplate","strictMode","scope","HdsCardContainer","TitleRow","HdsTextDisplay"],"mappings":";;;;;;AAAA;;;AAGC;AAwBc,MAAMA,oBAAoBC,SAAU,CAAA;EACjD,IAAIC,UAAaA,GAAA;IACf,OAAOC,KAAKC,KAAK,CAACD,KAAKE,GAAG,CAAE,IAAI,CAACC,IAAI,CAACC,KAAK,GAAG,IAAI,CAACD,IAAI,CAACE,KAAK,GAAI,GAAK,EAAA,GAAA,CAAA,CAAA;AACxE;EAEA,IAAIC,iBAAoBA,GAAA;AACtB,IAAA,IAAI,IAAI,CAACP,UAAU,GAAG,EAAI,EAAA;AACxB,MAAA,OAAO,sCAAA;AACT;AACA,IAAA,IAAI,IAAI,CAACA,UAAU,GAAG,GAAK,EAAA;AACzB,MAAA,OAAO,yCAAA;AACT;AACA,IAAA,OAAO,uCAAA;AACT;EAEA,IAAIQ,cAAiBA,GAAA;IACnB,MAAMC,SAAY,GAAA,IAAIC,IAAK,CAAAC,YAAY,CAAC,OAAS,EAAA;AAC/CC,MAAAA,QAAU,EAAA,SAAA;AACVC,MAAAA,cAAgB,EAAA;AAClB,KAAA,CAAA;IACA,MAAMR,KAAA,GAAQI,UAAUK,MAAM,CAAC,IAAI,CAACV,IAAI,CAACC,KAAK,CAAA;IAC9C,MAAMU,KAAA,GAAQN,UAAUK,MAAM,CAAC,IAAI,CAACV,IAAI,CAACE,KAAK,CAAA;AAE9C,IAAA,OAAO,CAAGD,EAAAA,KAAA,CAAWU,GAAAA,EAAAA,MAAO,CAAA;AAC9B;AAEA,EAAA;IAAAC,oBAAA,CAAAC,kBAAA,CAmCA,8hCAAA,EAAA;MAAAC,UAAA,EAAA,IAAA;AAAAC,MAAAA,KAAA,EAAAA,OAAA;QAAAC,gBAAA;QAAAC,QAAA;AAAAC,QAAAA;AAAA,OAAA;KAAU,CAAA,EAAV,IAAW,CAAA;AAAD;AACZ;;;;"}