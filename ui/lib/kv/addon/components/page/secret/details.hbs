<KvPageHeader @breadcrumbs={{@breadcrumbs}} @model={{@model}} @pageTitle={{@model.path}}>
  <:tabLinks>
    <LinkTo @route="secret.details" data-test-secrets-tab="Secret">Secret</LinkTo>
    <LinkTo @route="secret.metadata.index" data-test-secrets-tab="Metadata">Metadata</LinkTo>
    <LinkTo @route="secret.metadata.versions" data-test-secrets-tab="Version History">Version History</LinkTo>
    <LinkTo @route="secret.metadata.diff" data-test-secrets-tab="Version Diff">Version Diff</LinkTo>
  </:tabLinks>

  <:toolbarFilters>
    <Toggle
      data-test-json-view-toggle
      @name="json"
      @status="success"
      @size="small"
      @checked={{this.showJsonView}}
      @onChange={{this.toggleJsonView}}
    >
      <span class="has-text-grey">JSON</span>
    </Toggle>
  </:toolbarFilters>
  <:toolbarActions>
    <ToolbarLink @route="secret.edit" @type="add">Create new version</ToolbarLink>
  </:toolbarActions>
</KvPageHeader>

{{#if this.showJsonView}}
  <div class="has-top-margin-s">
    <JsonEditor @title="Version data" @value={{stringify @model.secret.secretData}} @readOnly={{true}} />
  </div>
{{else}}
  <div class="info-table-row-header">
    <div class="info-table-row thead">
      <div class="th column is-one-quarter">
        Key
      </div>
      <div class="th column">
        Value
      </div>
      <div class="th column justify-right" data-test-created-time>
        {{#if @model.secret.createdTime}}
          <ToolTip @verticalPosition="above" @horizontalPosition="center" as |T|>
            <T.Trigger data-test-tooltip-trigger tabindex="-1">
              Version created
              {{date-format @model.secret.createdTime "MMM dd, yyyy hh:mm a"}}
            </T.Trigger>
            <T.Content @defaultClass="tool-tip smaller-font">
              <div class="box" data-test-hover-copy-tooltip-text>
                {{@model.secret.createdTime}}
              </div>
            </T.Content>
          </ToolTip>
        {{/if}}
      </div>
    </div>
  </div>

  {{#each-in @model.secret.secretData as |key value|}}
    <InfoTableRow @label={{key}} @value={{value}} @alwaysRender={{true}}>
      <MaskedInput @name={{key}} @value={{value}} @displayOnly={{true}} @allowCopy={{true}} @allowDownload={{true}} />
    </InfoTableRow>
  {{else}}
    <InfoTableRow @label="" @value="" @alwaysRender={{true}} />
  {{/each-in}}
{{/if}}