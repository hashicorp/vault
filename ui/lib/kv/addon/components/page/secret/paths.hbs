{{!
  Copyright IBM Corp. 2016, 2025
  SPDX-License-Identifier: BUSL-1.1
}}

<Page::Header @title={{@path}} @icon={{@backend.icon}}>
  <:breadcrumbs>
    <Page::Breadcrumbs @breadcrumbs={{@breadcrumbs}} />
  </:breadcrumbs>

  <:badges>
    {{#if @path}}
      <Hds::Copy::Button @isIconOnly={{true}} @text="Copy your secret path" @textToCopy={{@path}} data-test-copy-button />
    {{/if}}
  </:badges>

  <:actions>
    <CodeGenerator::Policy::Flyout />
  </:actions>
</Page::Header>

<KvTabsToolbar>
  <:tabs>
    <li>
      <LinkTo @route="secret.index" @models={{array @backend @path}} data-test-secrets-tab="Overview">Overview</LinkTo>
    </li>
    <li>
      <LinkTo @route="secret.details" @models={{array @backend @path}} data-test-secrets-tab="Secret">Secret</LinkTo>
    </li>
    <li>
      <LinkTo
        @route="secret.metadata.index"
        @models={{array @backend @path}}
        data-test-secrets-tab="Metadata"
      >Metadata</LinkTo>
    </li>
    <li>
      <LinkTo
        @route="secret.paths"
        @models={{array @backend @path}}
        data-test-secrets-tab="Paths"
        @current-when={{true}}
      >Paths</LinkTo>
    </li>
    {{#if @canReadMetadata}}
      <li>
        <LinkTo
          @route="secret.metadata.versions"
          @models={{array @backend @path}}
          data-test-secrets-tab="Version History"
        >Version History
        </LinkTo>
      </li>
    {{/if}}
  </:tabs>
</KvTabsToolbar>

<KvPathsCard @backend={{@backend}} @path={{@path}} class="has-top-margin-xl" />