{{!
  Copyright (c) HashiCorp, Inc.
  SPDX-License-Identifier: BUSL-1.1
}}

<PageHeader as |p|>
  <p.levelLeft>
    <h1 class="title is-3">
      UI Login Rules
    </h1>
  </p.levelLeft>
</PageHeader>

{{! currently here empty per design, TBD if actions or filters will be added }}
<Toolbar />

{{#each @loginRules as |rule|}}
  <LinkedBlock class="list-item-row linked-block-item is-no-underline">
    <div>
      <div class="has-text-grey is-grid align-items-center linked-block-title">
        <Hds::TooltipButton @text={{rule.name}} aria-label="Type of rule">
          <Icon @name="user-check" class="has-text-grey-light" />
        </Hds::TooltipButton>
        <div data-test-rule-name={{rule.name}}>{{rule.name}}</div>
      </div>
      <div data-test-rule-path={{rule.namespace}}>{{rule.namespace}}</div>
    </div>
    <div class="linked-block-popup-menu">
      <Hds::Dropdown @isInline={{true}} as |dd|>
        <dd.ToggleIcon @icon="more-horizontal" @hasChevron={{false}} @text="login rules menu" data-test-popup-menu-trigger />
        <dd.Interactive data-test-view-rule-trigger>
          View
        </dd.Interactive>
        {{!  TODO: uncomment once read comp is setup
        <dd.Interactive data-test-read-rule-trigger>
          Read
        </dd.Interactive> 
        }}
        {{#if (has-permission "something")}}
          <dd.Interactive @color="critical" data-test-confirm-action-trigger>Delete</dd.Interactive>
        {{/if}}
      </Hds::Dropdown>
    </div>
  </LinkedBlock>
{{/each}}