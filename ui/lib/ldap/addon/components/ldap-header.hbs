{{!
  Copyright IBM Corp. 2016, 2025
  SPDX-License-Identifier: BUSL-1.1
}}

<Page::Header
  @title={{if @configRoute (concat @model.id " configuration") @model.id}}
  @description="LDAP"
  @icon={{@model.icon}}
>
  <:breadcrumbs>
    <Page::Breadcrumbs @breadcrumbs={{@breadcrumbs}} />
  </:breadcrumbs>
  <:actions>
    {{#unless @configRoute}}
      <Hds::Dropdown as |D|>
        <D.ToggleButton @text="Manage" @color="secondary" data-test-dropdown="Manage" />
        <D.Interactive
          @icon="settings"
          @route={{if @promptConfig "configure" "configuration"}}
          @model={{@model.id}}
          data-test-popup-menu="Configure"
        >Configure</D.Interactive>
        <D.Interactive
          {{on "click" (fn (mut this.engineToDisable) @model)}}
          @color="critical"
          @icon="trash"
          data-test-popup-menu="Delete"
        >Delete</D.Interactive>
      </Hds::Dropdown>
    {{/unless}}
  </:actions>
  <:tabs>
    <div class="tabs-container box is-marginless is-fullwidth is-paddingless">
      <nav class="tabs" aria-label="ldap tabs">
        <ul>
          {{#if @configRoute}}
            <li data-test-tab="general-settings">
              <LinkToExternal @route="secretsGeneralSettingsConfiguration" @model={{@model.id}}>
                General settings
              </LinkToExternal>
            </li>
            <li data-test-tab="plugin-settings">
              <LinkTo @route={{@configRoute}} @model={{@model.id}}>
                LDAP settings
              </LinkTo>
            </li>
          {{else}}
            <li><LinkTo @route="overview" data-test-tab="overview">Overview</LinkTo></li>
            <li><LinkTo @route="roles" data-test-tab="roles">Roles</LinkTo></li>
            <li><LinkTo @route="libraries" data-test-tab="libraries">Libraries</LinkTo></li>
          {{/if}}
        </ul>
      </nav>
    </div>
  </:tabs>
</Page::Header>

{{#if this.engineToDisable}}
  <ConfirmModal
    @color="critical"
    @confirmMessage="Any data in this engine will be permanently deleted."
    @confirmTitle="Disable engine?"
    @onClose={{fn (mut this.engineToDisable) null}}
    @onConfirm={{perform this.disableEngine this.engineToDisable}}
  />
{{/if}}

<Toolbar aria-label="nav for managing LDAP">
  <ToolbarFilters aria-label="filter for LDAP items">
    {{yield to="toolbarFilters"}}
  </ToolbarFilters>
  <ToolbarActions aria-label="actions for LDAP items">
    {{yield to="toolbarActions"}}
  </ToolbarActions>
</Toolbar>