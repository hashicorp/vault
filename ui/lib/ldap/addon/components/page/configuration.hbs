{{!
  Copyright IBM Corp. 2016, 2025
  SPDX-License-Identifier: BUSL-1.1
}}

<LdapHeader
  @model={{@model.backendModel}}
  @promptConfig={{@model.promptConfig}}
  @breadcrumbs={{@breadcrumbs}}
  @configRoute="configuration"
>
  <:toolbarActions>
    {{#if @model.configModel}}
      <ConfirmAction
        @buttonText="Rotate root"
        class="toolbar-button"
        @buttonColor="secondary"
        @onConfirmAction={{perform this.rotateRoot}}
        @confirmTitle="Rotate root?"
        @confirmMessage="After rotation, Vault will generate a new root password in your directory server."
        @modalColor="warning"
        @isRunning={{this.rotateRoot.isRunning}}
      />
    {{/if}}
    {{#if @model.configModel}}
      <ToolbarLink @route="configure" data-test-secret-backend-configure>
        Edit configuration
      </ToolbarLink>
    {{/if}}
  </:toolbarActions>
</LdapHeader>

{{#if @model.configModel}}
  {{#each this.defaultFields as |field|}}
    <InfoTableRow @label={{field.label}} @value={{field.value}} @formatTtl={{field.formatTtl}} @alwaysRender={{true}} />
  {{/each}}

  <h2 class="title is-4 has-top-margin-xl">TLS Connection</h2>
  <hr class="is-marginless" />

  {{#each this.connectionFields as |field|}}
    <InfoTableRow @label={{field.label}} @value={{field.value}} @alwaysRender={{true}} />
  {{/each}}
{{else if @model.configError}}
  <Page::Error @error={{@model.configError}} />
{{/if}}