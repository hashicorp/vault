{{!
  Copyright (c) HashiCorp, Inc.
  SPDX-License-Identifier: BUSL-1.1
}}

<PageHeader as |p|>
  <p.top>
    <Hds::Breadcrumb>
      <Hds::Breadcrumb::Item
        @text={{pluralize @itemType}}
        @route="vault.cluster.access.method.item.list"
        @models={{array @mountPath @itemType}}
      />
      <Hds::Breadcrumb::Item @text={{if (eq @mode "show") @model.id (capitalize @mode)}} @current={{true}} />
    </Hds::Breadcrumb>
  </p.top>
  <p.levelLeft>
    {{#if (eq @mode "show")}}
      <h1 class="title is-3">
        {{@model.id}}
      </h1>
    {{else}}
      <h1 class="title is-3">
        {{capitalize @mode}}
        {{singularize @itemType}}
        {{#if (eq @mode "edit")}}
          {{@model.id}}
        {{/if}}
      </h1>
    {{/if}}
  </p.levelLeft>
</PageHeader>
{{#if (eq @mode "show")}}
  <Toolbar>
    <ToolbarActions>
      <ConfirmAction
        @buttonText="Delete {{@itemType}}"
        class="toolbar-button"
        @buttonColor="secondary"
        @onConfirmAction={{this.deleteItem}}
        @confirmMessage="Are you sure you want to delete {{@itemType}} {{@model.id}}?"
      />
      <div class="toolbar-separator"></div>
      <ToolbarLink
        @route="vault.cluster.access.method.item.edit"
        @models={{array @mountPath @itemType @model.id}}
        data-test-configure-link="true"
      >
        Edit
        {{singularize @itemType}}
      </ToolbarLink>
    </ToolbarActions>
  </Toolbar>
{{/if}}
{{#if (eq @mode "show")}}
  <FieldGroupShow @model={{@model}} @showAllFields={{true}} />
{{else}}
  <form {{on "submit" (perform this.saveModel)}}>
    <div class="box is-sideless is-fullwidth is-marginless">
      <NamespaceReminder @mode="save" @noun={{@itemType}} />
      <MessageError @model={{@model}} />
      <FormFieldGroups @model={{@model}} @mode={{@mode}} @modelValidations={{this.modelValidations}} />
    </div>
    <div class="field is-grouped-split box is-fullwidth is-bottomless">
      <Hds::ButtonSet>
        <Hds::Button
          @text="Save"
          @icon={{if this.saveModel.isRunning "loading"}}
          type="submit"
          disabled={{this.saveModel.isRunning}}
          data-test-submit
        />
        {{#if (eq @mode "create")}}
          <Hds::Button
            @text="Cancel"
            @color="secondary"
            @route="vault.cluster.access.method.item.list"
            @models={{array @mountPath @itemType}}
            data-test-cancel-link={{true}}
          />
        {{else}}
          <Hds::Button
            @text="Cancel"
            @color="secondary"
            @route="vault.cluster.access.method.item.show"
            @models={{array @mountPath @itemType @model.id}}
            data-test-cancel-link={{true}}
          />
        {{/if}}
      </Hds::ButtonSet>
    </div>
  </form>
{{/if}}