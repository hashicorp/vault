{{!
  Copyright (c) HashiCorp, Inc.
  SPDX-License-Identifier: BUSL-1.1
}}

<PageHeader as |p|>
  <p.top>
    {{! TODO unsure best way to handle, ideally no keyvalue header but breadcrumbs on controller/route }}
    {{!-- <KeyValueHeader
      @baseKey={{this.model}}
      @path="vault.cluster.secrets.backend"
      @root={{this.root}}
      @showCurrent={{true}}
    /> --}}
  </p.top>
  <p.levelLeft>
    <h1 class="title is-3" data-test-backend-configure-title={{this.model.backend}}>
      Tune
      {{! ARG TODO rename backend to enginePath }}
      {{this.model.backend}}
    </h1>
  </p.levelLeft>
</PageHeader>

<Toolbar>
  <ToolbarActions>
    <ToolbarLink
      @route="vault.cluster.secrets.backend"
      @model={{this.model.secretEngineRecord.id}}
      data-test-backend-view-link
    >
      View backend
    </ToolbarLink>
  </ToolbarActions>
</Toolbar>

{{log this.model.secretEngineRecord "model"}}
<SecretEngine::TuneMount
  @backendPath={{this.model.secretEngineRecord.id}}
  @type={{this.model.type}}
  {{! arg this is wrong }}
  @mountConfigModel={{this.model.secretEngineRecord}}
  @tuneMountModel={{this.model.tuneMountModel}}
/>