{{!
  Copyright IBM Corp. 2016, 2025
  SPDX-License-Identifier: BUSL-1.1
}}

{{#let (engines-display-data this.model.secretsEngine.type) as |engineDisplayData|}}
  <Page::Header
    @title="{{this.model.secretsEngine.id}} configuration"
    @description={{engineDisplayData.displayName}}
    @icon={{engineDisplayData.glyph}}
  >
    <:breadcrumbs>
      <Page::Breadcrumbs @breadcrumbs={{this.breadcrumbs}} />
    </:breadcrumbs>
    <:actions>
      <Hds::Button
        @color="secondary"
        @route={{if
          engineDisplayData.isOnlyMountable
          "vault.cluster.secrets.backends"
          "vault.cluster.secrets.backend.list-root"
        }}
        @text="Exit configuration"
        data-test-button="Exit configuration"
      />
    </:actions>
    <:tabs>
      <Mount::ConfigureTabs
        @configRoute="configuration.edit"
        @displayName={{engineDisplayData.displayName}}
        @path={{this.model.secretsEngine.id}}
      />
    </:tabs>
  </Page::Header>
{{/let}}

<Toolbar>
  <ToolbarActions>
    <ToolbarLink @route="vault.cluster.secrets.backend" @model={{this.model.id}} data-test-backend-view-link>
      View backend
    </ToolbarLink>
  </ToolbarActions>
</Toolbar>

{{#if (eq this.model.type "ssh")}}
  <SecretEngine::ConfigureSsh @configForm={{this.model.configForm}} @id={{this.model.id}} />
  {{! This "else if" check is preventive. As of writing, all engines using this route, but "ssh", are wif engines }}
{{else if this.isWifEngine}}
  <SecretEngine::ConfigureWif
    @backendPath={{this.model.id}}
    @displayName={{this.displayName}}
    @type={{this.model.type}}
    @configForm={{this.model.configForm}}
  />
{{/if}}